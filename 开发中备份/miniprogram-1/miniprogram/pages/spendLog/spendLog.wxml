<import src="../public/public.wxml" />
<template is="custom" />

<van-tabs sticky>
  <van-tab title="日志">
    <!-- head -->
    <van-sticky offset-top="{{ 60 }}">
      <van-panel>
        <van-row>
          <van-col offset="1" span="22">
              <van-search
                name="search_value"
                placeholder="请输入搜索关键字"
                bind:search="onSearch"
                bind:cancel="onCancel_search"
                show-action
                shape="round"
                background="#fff"
              />
          </van-col>
          <van-col span="1"></van-col>
        </van-row>
      </van-panel>
    </van-sticky>

    <!-- content -->
    <van-panel wx:for="{{spendLogs}}">
      <!-- content-header -->
      <view slot="header" style="background-color:#f1f1f1;line-height:60rpx;">
        <van-row>
          <van-col offset="2" span="12">
            {{item.time}}
          </van-col>
          <van-col span="8" class="text-right">
            +10
          </van-col>
          <van-col span="2"></van-col>
        </van-row>
      </view>

      <!-- content-content -->
      <view wx:for="{{item.datas}}" wx:for-item="datas">
      <van-swipe-cell right-width="{{ 90 }}">
        <van-cell label="{{datas.spend_type}} {{datas.detail_time}}" center>
          <view slot="title">
            <text>{{datas.name}} </text>
            <text>{{datas.comment}}</text>
          </view>
          <view slot="icon">
            <text class="cuIcon-{{datas.icon}}" style="margin-right:20rpx;"></text>
          </view>
          <view slot='right-icon'>
            <view class="text-right">{{datas.operate}}{{datas.value}}</view>
            <view>余额:{{datas.remain}}</view>
          </view>
        </van-cell>
        <view slot="right" style="height:100%;">
          <van-button custom-style="height:100%;" type="primary" icon="edit" id="{{datas.id}}" bind:click="edit" data-time="{{item.time}}"></van-button>
          <van-button custom-style="height:100%;" type="danger" icon="delete" id="{{datas.id}}" bind:click="delete" data-time="{{item.time}}" data-message="{{datas.name}} {{datas.comment}} {{datas.operate}}{{datas.value}}"></van-button>
        </view>
      </van-swipe-cell>
      </view>
    </van-panel>
  </van-tab>

  <van-tab title="统计"></van-tab>
</van-tabs>

<van-divider hairline contentPosition="center">已经到底啦</van-divider>
<van-divider hairline />
<van-divider hairline />
<van-divider hairline />

<van-dialog id="van-dialog" />

<van-dialog
  use-slot
  title="编辑"
  show="{{ show_edit_dialog }}"
  show-cancel-button
  bind:close="onClose_edit_dialog"
  bind:confirm="update"
>
  <van-row>
    <van-col offset="2" span="20">
      <van-field
        label="注释"
        value="{{ spendLogData.comment }}"
        placeholder="请输入注释"
        border="{{ false }}"
        bind:change="onChange_spendLogData_comment"
      />
    </van-col>
    <van-col span="2"></van-col>
  </van-row>

  <van-row>
    <van-col offset="2" span="8">
      <van-cell title="消费类型"></van-cell>
    </van-col>
    <van-col span="12">
      <van-cell title="{{spendLogData.spend_type}}">
        <view slot="icon">
          <text class="cuIcon-{{spendLogData.icon}}"></text>
        </view>
      </van-cell>
    </van-col>
    <van-col span="2"></van-col>
  </van-row>

  <!-- 分类块 -->
  <van-row>
    <van-col offset="4" span="20">
      
      <view style="display:inline-block;margin:5rpx 10rpx 5rpx 0rpx;" wx:for="{{spend_types}}">
        <van-cell clickable title="{{item.text}}" size="mini" bind:click="edit_choose_type" data-text="{{item.text}}" data-icon="{{item.icon}}">
          <view slot="icon"><text class="cuIcon-{{item.icon}}"></text></view>
        </van-cell>
      </view>

    </van-col>
  </van-row>
</van-dialog>